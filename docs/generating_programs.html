<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Generating Programs</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Plushi</span> <span class="project-version">0.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="contributing.html"><div class="inner"><span>Contributing</span></div></a></li><li class="depth-1  current"><a href="generating_programs.html"><div class="inner"><span>Generating Programs</span></div></a></li><li class="depth-1 "><a href="getting_started.html"><div class="inner"><span>Getting Started</span></div></a></li><li class="depth-1 "><a href="instructions.html"><div class="inner"><span>Instructions</span></div></a></li><li class="depth-1 "><a href="running_programs.html"><div class="inner"><span>Running Programs</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plushi</span></div></div></li><li class="depth-2 branch"><a href="plushi.atoms.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>atoms</span></div></a></li><li class="depth-2 branch"><a href="plushi.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="plushi.instruction.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>instruction</span></div></a></li><li class="depth-3"><a href="plushi.instruction.io.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></a></li><li class="depth-2 branch"><a href="plushi.interpreter.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>interpreter</span></div></a></li><li class="depth-2 branch"><a href="plushi.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-2"><a href="plushi.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#generating-programs" name="generating-programs"></a>Generating Programs</h1>
<p>The Plushi HTTP server allows for users to get a list of all the instructions supported by the interpreter.</p>
<p>Assuming we have a Plushi server running on port <code>8075</code>, we can issue a POST request where the body is JSON with the <code>action</code> and <code>arity</code> keys specified. Below is an example of such a request being made via the Python requests library.</p>
<pre><code class="py">import json, requests
instr_set = requests.post("http://localhost:8075/", json=json.dumps({
  'action': 'instructions',
  'arity': arity
})).json()
</code></pre>
<p>The result of the instructions request above will be a list of JSON objects. Each object describes the signature of a support Push instruction with the following keys <code>name</code>, <code>input-type</code> <code>output-types</code> and optionall <code>docstring</code>.</p>
<p>The following is an example of one object that could appear in the list of objects returned by the instructions command.</p>
<pre><code class="json">{
  "name": "plushi:integer_add",
  "input-types": ["integer", "integer"],
  "output-types": ["integer"],
  "docstring": "Adds the top two integers and pushes the result."
}
</code></pre>
<p>The <code>name</code> field is an identifier for the instruction which can appear in Plushi programs during execution. The <code>input-types</code> field denotes what data types, and how many of them, the instruction requires for input. The <code>output-types</code> field denotes how many output values the instruction produces and each of their data types. The <code>docstring</code> values describes the behavior of the instruction for reference, and is not intended to be used by AI/ML systems. Docstrings will only be included in the response to the intructions request if JSON body of the requests includes <code>docstrings: true</code>.</p>
<h3><a href="#filtering-the-instruction-set" name="filtering-the-instruction-set"></a>Filtering the Instruction Set</h3>
<p>Note that the above example specifies that the <code>integer_add</code> instruction requires two integers as input and produces one integer as output. This information can be used to filter the instruction set down to only the instructions that deal with data types that are relevant to your problem.</p>
<p>For example, if you are attempting to produce a program that acts as a regression model with real-valued numeric inputs, you will not require the use of instructions that manipulate strings such as <code>string_split</code>. We could filter the instruction set do just the instruction which manipulate floats using the following Python code.</p>
<pre><code class="py">float_instruction_names = []
for i in instructions:
  if ("float" in i["input-types"]) or ("float" in i["output-types"]):
    float_instruction_names.append(i["name"])
</code></pre>
<h3><a href="#specifing-arity" name="specifing-arity"></a>Specifing Arity</h3>
<p>We commonly want to produce programs that accept some input values that impact program behavior. The programs we generate using Plushi must include instructions which reference these input values. These instructions are called input instructions. To ensure the input instructions are included in the instruction set, we specify the <code>--arity</code> of the programs we will be generating when calling pushi with <code>--instruction-set</code>. This value is generally the same as the number of features in the dataset which is being used to produce the program.</p>
<h3><a href="#using-instruction-set-to-create-programs" name="using-instruction-set-to-create-programs"></a>Using Instruction Set to Create Programs</h3>
<p>Once we have a list of instructions we would like to appear in our programs, it is trivial to generate random programs. The structure of a Plushi program is designed so that any linear sequence of instruction names and literal values (integers, floats, booleans, or strings) is a valid, executable program.</p>
<pre><code class="py">import random
program_size = 50
literals = [-1.0, 1.0, 2.0, 10.0]
all_atoms = literals + float_instruction_names
program = [random.choice(all_atoms) for _ in range(program_size)]
</code></pre>
<p>The listed produced by the code above stored in the <code>program</code> variable will be a valid, executable program that can be run by the Plushi interpreter. For more information, see the <a href="">running programs</a> documentation topic.</p>
<h3><a href="#searching-over-programs" name="searching-over-programs"></a>Searching Over Programs</h3>
<p>Given that any valid instruction name or literal can apear at any point in the program and the program will remain valid and executable, it is trivial to swap the parts of all of a program with new instructions and literals.</p></div></div></div></body></html>